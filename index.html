<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Goplop‚Äôs CDN Vault</title>
  <style>
    body {
      font-family: monospace;
      background-color: #0e0e0e;
      color: #00ffc8;
      padding: 2em;
    }
    h1 {
      color: #ff00aa;
    }
    .file-entry {
      margin-bottom: 1.5em;
      padding: 1em;
      border: 1px solid #444;
      border-radius: 8px;
      background-color: #1a1a1a;
    }
    a {
      color: #00bfff;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    button {
      margin-top: 0.5em;
      background-color: #222;
      color: #00ffc8;
      border: 1px solid #00ffc8;
      padding: 0.3em 0.6em;
      cursor: pointer;
      font-family: monospace;
    }
    button:hover {
      background-color: #00ffc8;
      color: #000;
    }
  </style>
</head>
<body>
  <h1>üì¶ Goplop‚Äôs CDN Vault</h1>
  <p>All files are UUID-logged and timestamped for audit clarity.</p>
  <div id="file-list">Loading files...</div>

  <script>
    fetch("uploads/manifest.json")
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById("file-list");
        container.innerHTML = "";
        const entries = Object.entries(data).sort((a, b) => b[1].timestamp - a[1].timestamp);
        for (const [filename, meta] of entries) {
          const div = document.createElement("div");
          div.className = "file-entry";
          div.innerHTML = `
            <strong>${filename}</strong><br>
            UUID: <code>${meta.uuid}</code><br>
            Timestamp: <code>${meta.timestamp}</code><br>
            <a href="${meta.link}" target="_blank">üîó View File</a><br>
            <button onclick="copyLink('${meta.link}')">üìã Copy Link</button>
          `;
          container.appendChild(div);
        }
      })
      .catch(err => {
        document.getElementById("file-list").innerText = "‚ö†Ô∏è Failed to load manifest.";
        console.error(err);
      });

    function copyLink(link) {
      navigator.clipboard.writeText(link)
        .then(() => alert("‚úÖ Link copied to clipboard!"))
        .catch(() => alert("‚ùå Failed to copy link."));
    }
  </script>
</body>
</html>
